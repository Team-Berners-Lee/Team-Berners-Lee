<!DOCTYPE html>
<html>
<head lang="de">
    <meta charset="UTF-8">
    <title>Bucheingabe</title>
    <link rel="stylesheet" type="text/css" href="ibdb.css">

    <script type="text/javascript">
        var currentDate = new Date();
        var currentYear = currentDate.getFullYear();

        function entryWarn(){
            alert( "Einige Eingaben sind fehlerhaft. Bitte überprüfen Sie ihre Eingaben");
        }

        function validateForm(){
            var validEntries = true;
            var focusSet = false;

            // Check if Buchtitel is not Empty
            if( document.Form.Buchtitel.value == "" ){
                document.getElementById('Buchtitel').style.borderColor = "red";
                if(!focusSet) document.Form.Buchtitel.focus();
                validEntries = false;
            }else{
                document.getElementById('Buchtitel').style.borderColor = "transparent";
            }
            // Check if Buchauthor only contain letters
            if( nurBuchstaben(document.Form.Buchautor.value ) == false || document.Form.Buchautor.value == ""){
                document.getElementById('Buchautor').style.borderColor = "red";
                if(!focusSet) document.Form.Buchautor.focus();
                validEntries = false;
            }else{
                document.getElementById('Buchautor').style.borderColor = "transparent";
            }
            // Check if DeinNachname only contain letters
            if( nurBuchstaben(document.Form.DeinNachname.value )  == false ){
                document.getElementById('DeinNachname').style.borderColor = "red";
                if(!focusSet ) document.Form.DeinNachname.focus();
                validEntries = false;
            }else{
                document.getElementById('DeinNachname').style.borderColor = "transparent";
            }
            // Check if DeinVorname only contain letters
            if( nurBuchstaben(document.Form.DeinVorname.value) == false ){
                document.getElementById('DeinVorname').style.borderColor = "red";
                if(!focusSet) document.Form.DeinVorname.focus();
                validEntries = false;
            }else{
                document.getElementById('DeinVorname').style.borderColor = "transparent";
            }
            /* Check if Erscheinungsjahr only contains numbers, is not empty and
            is not larger than the current year */
            if(document.Form.Erscheinungsjahr.value > currentYear ||
                    document.Form.Erscheinungsjahr.length > 4 ||
                    document.Form.Erscheinungsjahr.value < 0){
                document.getElementById('Erscheinungsjahr').style.borderColor = "red";
                if(!focusSet) document.Form.Erscheinungsjahr.focus();
                validEntries = false;
            }else if( nurZahlen(document.Form.Erscheinungsjahr.value) == false){
                document.getElementById('Erscheinungsjahr').style.borderColor = "red";
                if(!focusSet) document.Form.Erscheinungsjahr.focus();
                validEntries = false;
            }else{
                document.getElementById('Erscheinungsjahr').style.borderColor = "transparent";
            }
            // Check if Auflage contains only numbers
            if( nurZahlen(document.Form.Auflage.value) == false ){
                document.getElementById('Auflage').style.borderColor = "red";
                if(!focusSet) document.Form.Auflage.focus();
                validEntries = false;
            }else{
                document.getElementById('Auflage').style.borderColor = "transparent";
            }
            // Check if ISBN contains exactly 13 numbers
            if( document.Form.ISBN.value.length > 13 ||
                    document.Form.ISBN.value.length < 13 ||
                    nurZahlen(document.Form.ISBN.value) == false ){
                document.getElementById('ISBN').style.borderColor = "red";
                if(!focusSet) document.Form.ISBN.focus();
                validEntries = false;
            }else{
                document.getElementById('ISBN').style.borderColor = "transparent";
            }



            // final check what to return and if to throw error popup
            if(validEntries == false){
                entryWarn();
                return false;
            }else{
                return true;
            }
        }

        // Check if given value contains only letters, else returns false
        function nurBuchstaben(value){
            if(value.length < 0 ){
                return false;
            }else if(value.length > 0){
                    var val = value;
                    for(i=0; i < val.length; i++){
                        if(val.charAt(i) < "A"  ||
                                val.charAt(i) > "Z" && val.charAt(i) < "a" ||
                                val.charAt(i) > "z"){
                            return false;
                        }
                    }
            }else{
                return true;
            }
        }

        function nurZahlen(value){
            if (value.length < 0) {
                return false;
            } else if(value.length > 0){
                var val = value;
                for (i = 0; i < val.length; i++) {
                    if (val.charAt(i) < "0" || val.charAt(i) > "9") {
                        return false;
                    }
                }
            }
        }


    </script>
</head>
<body>
<h1>Buch anlegen</h1>

<form name="Form" id="Main" action="http://martinakraus.net/createBookEntry.php" method="post" onsubmit="return validateForm()">
    <div id="booktoken">
        <p>
            <label class="book_entry_label" for="Buchtitel">Buchtitel</label>
            <input type="text" name="Buchtitel" id="Buchtitel"><br>
        </p>

        <p>
            <label class="book_entry_label" for="Buchautor">Buchautor</label>
            <input type="text" name="Buchautor" id="Buchautor"><br>
        </p>

        <p>
            <label class="book_entry_label" for="ISBN">ISBN</label>
            <input type="text" name="ISBN" id="ISBN"><br>
        </p>

        <p>
            <label class="book_entry_label" for="Kapitel">Kapitel</label>
            <input type="text" name="Kapitel" id="Kapitel"><br>
        </p>

        <p>
            <label class="book_entry_label" for="Erscheinungsjahr">Erscheinungsjahr</label>
            <input type="text" name="Erscheinungsjahr" id="Erscheinungsjahr"><br>
        </p>

        <p>
            <label class="book_entry_label" for="Auflage">Auflage</label>
            <input type="text" name="Auflage" id="Auflage"><br>
        </p>

        <p>
            <label class="book_entry_label" for="ArtDesBuches">Art des Buches</label>
            <select name="ArtDesBuches" size="1" id="ArtDesBuches">
                <option value="ebook">eBook</option>
                <option value="newspaper">Newspaper</option>
                <option value="taschenbuch">Taschenbuch</option>
                <option value="lexikon">Lexikon</option>
                <option value="hardcover" selected="selected">Hardcover</option>
                <option value="paperback">Paperback</option>
            </select><br>
        </p>

        <p>
            <label id="genre_title" for="Genre">Genre
                 <span id="genre-checkboxes-2ndRow">
                         <label class="checkbox"><input type="checkbox" name="Genre" value="Doku">Doku<br></label>
                         <label class="checkbox"><input type="checkbox" name="Genre" value="Komödie">Komödie<br></label>
                         <label class="checkbox"><input type="checkbox" name="Genre" value="Romanze">Romanze<br></label>
                </span>
                <span id="genre-checkboxes">
                     <label class="checkbox"><input type="checkbox" name="Genre" id="Genre" value="Horror"
                                                    checked="checked">Horror<br></label>
                     <label class="checkbox"><input type="checkbox" name="Genre" value="Psycho">Psycho<br></label>
                     <label class="checkbox"><input type="checkbox" name="Genre" value="Krimi">Krimi<br></label>
                  </span>
            </label>
        </p>
    </div>

    <div id="nametoken">
        <p>
            <label class="book_entry_label" for="DeinVorname">Dein Vorname</label>
            <input type="text" name="DeinVorname" id="DeinVorname"><br>
        </p>

        <p>
            <label class="book_entry_label" for="DeinNachname">Dein Nachname</label>
            <input type="text" name="DeinNachname" id="DeinNachname"><br>
        </p>

        <p>
            <label class="book_entry_label" for="MeinFavorit">Mein Favorit</label>
            <input type="checkbox" name="MeinFavorit" id="MeinFavorit" value="MeinFavorit"><br>
        </p>
    </div>
    <footer id="submitbutton"><input type="submit"  name="Absenden" value="Absenden"></footer>
</form>
</body>
</html>
